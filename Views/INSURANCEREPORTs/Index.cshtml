@model IEnumerable<HRM.Models.INSURANCEREPORT>

@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
	<!-- Style -->
	<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
	<link href="~/Scripts/fresh-bootstrap-table.css" rel="stylesheet" />

	<link href="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.css" rel="stylesheet">

	<script src="https://unpkg.com/bootstrap-table@1.18.1/dist/bootstrap-table.min.js"></script>
	<script src="https://unpkg.com/bootstrap-table@1.18.1/dist/extensions/export/bootstrap-table-export.min.js"></script>

	<script src="https://unpkg.com/bootstrap-table/dist/bootstrap-table.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>

</head>
<style>
	.main {
		padding: 20px 10px !important;
	}

	.btn-search {
		background: #3D76B5;
		/* 1 dp */
		border-radius: 4px;
		color: #3D76B5;
		width: 80px;
		height: 40px;
		position: absolute;
		background: #E3F2FD;
		border: 1px solid #3D76B5;
	}

	.form-control {
		border-radius: 7px !important;
	}
</style>
<body>
	<br />
	<div class="tool-bar">
		<div class="row">
			<div class="input-daterange">
				<div class="col-md-2">
					<input type="month" name="select_date" id="select_date" class="form-control" />
				</div>
			</div>
			<div class="search-panel">
				<div class="col-md-2">
					<input type="text" name="select_room" id="select_room" placeholder="Tất cả phòng" class="form-control" />
					@*@Html.DropDownList("RoomID", (IEnumerable<SelectListItem>)ViewBag.RoomID, new { @class = "drop-down-list" })*@
				</div>
				<div class="col-md-2">
					<input type="text" name="select_position" id="select_position" placeholder="Tất cả chức vụ" class="form-control" />
					@*@Html.DropDownList("PositionID", (IEnumerable<SelectListItem>)ViewBag.PositionID, new { @class = "drop-down-list" })*@
				</div>
				<div class="col-md-2">
					<input type="search" name="find_name" id="find_name" placeholder="Tìm tên nhân viên" class="form-control search-input" />
				</div>
			</div>
			<div class="col-md-2">
				<input type="button" name="search" id="search" value="Tìm kiếm" class="btn-search" />
			</div>
		</div>
	</div>
	<table data-sortable="true" class="fresh-table" id="fresh-table" width="100%">
		<thead>
			<tr>
				<th data-field="name" data-sortable="true">
					@Html.DisplayName("Tên nhân viên")
				</th>
				<th data-field="department" data-sortable="true">
					@Html.DisplayName("Phòng")
				</th>
				<th data-field="position" data-sortable="true">
					@Html.DisplayName("Chức vụ")
				</th>
				<th data-field="insurance_sum" data-sortable="true">
					@Html.DisplayName("Tổng tiền đóng bảo hiểm")
				</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model)
			{
				<tr>
					<td>
						@Html.DisplayFor(modelItem => item.EMPLOYEE.EmployeeName)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.EMPLOYEE.ROOM.RoomName)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.EMPLOYEE.POSITION.PositionName)
					</td>
					<td>
					</td>
					<td>
						@Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })
					</td>
				</tr>
			}
		</tbody>
		<tfoot>
			<tr>
				<td></td>
				<td></td>
				<td>Tổng tiền đóng bảo hiểm của doanh nghiệp: </td>
				<td id="total_insurance"></td>
			</tr>
		</tfoot>
	</table>
</body>
<script>
	var $table = $('#fresh-table')
	$(function () {
		$table.bootstrapTable({
			classes: 'table table-hover table-responsive',
			toolbar: '.toolbar',
			pagination: true,
			striped: true,
			pageSize: 8,
			pageList: [8, 10, 25, 50, 100],

			formatShowingRows: function (pageFrom, pageTo, totalRows) {
				return ''
			},
			formatRecordsPerPage: function (pageNumber) {
				return pageNumber + ' rows visible'
			}
		})
	})
	var total_insurance = 0;

	$(data).each(function (i) {
		total_insurance = total_insurance + parseInt(data[i].insurance_sum);
	});
	$('#total_insurance').html(total_insurance);

</script>
